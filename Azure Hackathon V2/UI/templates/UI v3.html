<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Service Dashboard Header</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href={{ url_for('static', filename='css_v1/styles.css') }}>
</head>
<body>
    <!-- Header Section -->
    <header class="dashboard-header">
        <!-- Logo -->
        <div class="logo">
            <span>MyIT</span>
        </div>

        <!-- Navigation Links -->
        <nav class="nav-links">
            <a href="#">All</a>
            <a href="#">Favorites</a>
            <a href="#">History</a>
            <a href="#">Workspaces</a>
        </nav>

        <!-- Workspace Button -->
        <div class="workspace-btn">
            <button class="workspace-button">
                <i class="fa fa-folder"></i> Service Operations Workspace <i class="fa fa-star"></i>
            </button>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Search..." aria-label="Search">
            <button id="searchButton"><i class="fa fa-search"></i></button>
        </div>

        <!-- Notification and User Icons -->
        <div class="header-icons">
            <i class="fa fa-bell"></i>
            <i class="fa fa-cog"></i>
            <i class="fa fa-user-circle"></i>
        </div>
    </header>

    <!-- JavaScript for Search Functionality -->
    <script>
        const searchButton = document.getElementById('searchButton');
        const searchInput = document.getElementById('searchInput');

        searchButton.addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (query) {
                alert(`You searched for: ${query}`);
                searchInput.value = ''; // Clear the input field
            } else {
                alert('Please enter a search query.');
            }
        });
    </script>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Service Ticket Details</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href={{ url_for('static', filename='css_v1/ticket-details.css') }}>

</head>
<body>
    <!-- Ticket Header Section -->
    <div class="ticket-header">
        <!-- Incident Details -->
        <div class="incident-info">
            <i class="fa fa-bars"></i>
            <span>Incident</span>
            <span class="incident-id">INC0010622 (Workspace view)</span>
        </div>


        <!-- Action Buttons -->
        <div class="action-buttons">
            <button id="edit" class="edit-button">Edit</button>
            <button id="auto-resolve" class="auto-resolve-button">Auto-Resolve</button>
        </div>
    </div>
    <!-- Ticket Details Form -->
    <div class="ticket-form">
        <div class="form-row">
            <div class="form-group">
                <label>Number</label>
                <input type="text" value="INC0010622" readonly>
            </div>
            <div class="form-group">
                <label>Caller</label>
                <input type="text" value="BR0105678" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Category</label>
                <input type="text" value="Customer Portal" readonly>
            </div>
            <div class="form-group">
                <label>Subcategory</label>
                <input type="text" value="Signature Portal" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Business Service</label>
                <input type="text" value="" readonly>
            </div>
            <div class="form-group">
                <label>Configuration Item</label>
                <input type="text" value="" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Contact Type</label>
                <input type="text" value="-- None --" readonly>
            </div>
            <div class="form-group">
                <label>State</label>
                <input type="text" value="Resolved" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Impact</label>
                <input type="text" value="1 - High" readonly>
            </div>
            <div class="form-group">
                <label>Urgency</label>
                <input type="text" value="1 - High" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Priority</label>
                <input type="text" value="1 - High" readonly>
            </div>
            <div class="form-group">
                <label>Assignment Group</label>
                <input type="text" value="Customer Portal RTB" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>Assigned To</label>
                <input type="text" value="" readonly>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group full-width">
                <label>Short Description</label>
                <input type="text" value="Unable to access Signature Portal" readonly>
            </div>
        </div>




		<div class="form-row">
			<div class="form-group full-width">
				<label>Description</label>
				<textarea id ="prompt" name="prompt_input"> I was not able to access signature portal from central customer portal since yesterday, could you please check on the same and provide the resolution.</textarea>
			</div>
		</div>

		

        <div class="form-row">
            <div id="resol" class="form-group full-width hidden">
                <label>Resolution</label>
            </div>
        </div>

		<div id="output-container" class="hidden">
			<div class="form-row">
				<div class="form-group full-width">
					<textarea id="output-textbox" class="response"></textarea>							
			<div class="action-buttons">
				<button id="submitButton" class="edit-button">Submit</button>
			</div>
		</div>
		
		<script>
			const inputTextbox = document.getElementById('prompt');
			const outputTextbox = document.getElementById('output-textbox');
			const outputContainer = document.getElementById('output-container');
			const resolutionLabel = document.getElementById('resol');
<!-- 			function onButtonClick(){ -->
<!-- 			  document.getElementById('output-container').className="show"; -->
<!-- 			  document.getElementById('resol').className="show"; -->
<!-- 			  const outputTextbox = document.getElementById('output-textbox'); -->
<!-- 			  document.getElementById('output-textbox').className="show";
<!-- 			  document.getElementById('button-container').style.visibility = 'visible'; -->
<!-- 			  document.getElementById('editButton').style.visibility = 'visible'; -->
<!-- 			  document.getElementById('submitButton').style.visibility = 'visible'; --> -->
<!-- 	                } -->
			// JavaScript to handle the button click and display output in a specific section
			document.getElementById('auto-resolve').addEventListener('click', async () => {
	
				//document.getElementById('resol').className="show";
				//document.getElementById('output-container').className="show";
				outputContainer.classList.remove('hidden');
				resolutionLabel.classList.remove('hidden');
				
				const content = inputTextbox.value;
				try {
					const response = await fetch('/run-script', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify({ content })
					});

					const data = await response.text(); // Get plain text response
					outputTextbox.value = data;

				} catch (error) {
					outputSection.textContent = `Request failed: ${error}`;
				}
			});
			const submitButton = document.getElementById('submitButton');
<!-- 			const outputTextbox = document.getElementById('output-textbox'); -->
			// Function to handle the Submit button click
			submitButton.addEventListener('click', () => {
				outputTextbox.setAttribute('readonly', true);
				outputTextbox.style.backgroundColor = "#f0f0f0";
				alert(`Ticket Resolution has been Sucessfully Submitted`);
			});
		</script>			
		<script>

		</script>	
		
		
    </div>
</body>
</html>

